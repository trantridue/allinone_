-- MySQL Script generated by MySQL Workbench
-- 12/25/14 17:48:25
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema allinone
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `allinone` ;
CREATE SCHEMA IF NOT EXISTS `allinone` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `allinone` ;

-- -----------------------------------------------------
-- Table `allinone`.`shop`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`shop` ;

CREATE TABLE IF NOT EXISTS `allinone`.`shop` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(32) NOT NULL,
  `address` VARCHAR(256) NULL,
  `date` DATETIME NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;


-- -----------------------------------------------------
-- Table `allinone`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`user` ;

CREATE TABLE IF NOT EXISTS `allinone`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `shop_id` INT NOT NULL,
  `name` VARCHAR(128) NOT NULL,
  `email` VARCHAR(64) NULL,
  `phone_number` VARCHAR(16) NULL,
  `username` VARCHAR(16) NOT NULL,
  `password` VARCHAR(32) NOT NULL,
  `confirmcode` VARCHAR(32) NULL DEFAULT 'y',
  `status` VARCHAR(1) NOT NULL DEFAULT 'Y',
  `start_date` DATETIME NOT NULL DEFAULT '2014-01-01 08:00:00',
  `end_date` DATETIME NULL DEFAULT '2020-12-31 22:00:00',
  `description` VARCHAR(500) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci
COMMENT = 'Employees Information';

CREATE INDEX `fk_user_shop_idx` ON `allinone`.`user` (`shop_id` ASC);


-- -----------------------------------------------------
-- Table `allinone`.`role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`role` ;

CREATE TABLE IF NOT EXISTS `allinone`.`role` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(8) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;


-- -----------------------------------------------------
-- Table `allinone`.`user_role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`user_role` ;

CREATE TABLE IF NOT EXISTS `allinone`.`user_role` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `role_id` INT NOT NULL,
  `user_id` INT NOT NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

CREATE INDEX `fk_user_role_role_idx` ON `allinone`.`user_role` (`role_id` ASC);

CREATE INDEX `fk_user_role_user_idx` ON `allinone`.`user_role` (`user_id` ASC);


-- -----------------------------------------------------
-- Table `allinone`.`provider`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`provider` ;

CREATE TABLE IF NOT EXISTS `allinone`.`provider` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `tel` VARCHAR(16) NOT NULL,
  `address` VARCHAR(245) NULL,
  `description` VARCHAR(245) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `allinone`.`import_facture`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`import_facture` ;

CREATE TABLE IF NOT EXISTS `allinone`.`import_facture` (
  `code` VARCHAR(45) NOT NULL,
  `date` DATETIME NOT NULL,
  `total` FLOAT NOT NULL,
  `description` VARCHAR(245) NULL,
  `provider_id` INT NOT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `code_UNIQUE` ON `allinone`.`import_facture` (`code` ASC);

CREATE INDEX `fk_import_facture_provider1_idx` ON `allinone`.`import_facture` (`provider_id` ASC);


-- -----------------------------------------------------
-- Table `allinone`.`provider_paid`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`provider_paid` ;

CREATE TABLE IF NOT EXISTS `allinone`.`provider_paid` (
  `id` INT NOT NULL,
  `provider_id` INT NOT NULL,
  `amount` FLOAT NOT NULL,
  `date` DATETIME NOT NULL,
  `description` VARCHAR(245) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

CREATE INDEX `fk_provider_paid_provider1_idx` ON `allinone`.`provider_paid` (`provider_id` ASC);


-- -----------------------------------------------------
-- Table `allinone`.`category`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`category` ;

CREATE TABLE IF NOT EXISTS `allinone`.`category` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `description` VARCHAR(245) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `allinone`.`season`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`season` ;

CREATE TABLE IF NOT EXISTS `allinone`.`season` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `start_time` DATE NOT NULL,
  `end_time` DATE NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `allinone`.`sex`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`sex` ;

CREATE TABLE IF NOT EXISTS `allinone`.`sex` (
  `id` INT NOT NULL,
  `name` VARCHAR(6) NOT NULL DEFAULT 'woman',
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `allinone`.`brand`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`brand` ;

CREATE TABLE IF NOT EXISTS `allinone`.`brand` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `allinone`.`product`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`product` ;

CREATE TABLE IF NOT EXISTS `allinone`.`product` (
  `code` VARCHAR(16) NOT NULL,
  `name` VARCHAR(245) NOT NULL,
  `category_id` INT NOT NULL,
  `season_id` INT NOT NULL,
  `sex_id` INT NOT NULL,
  `export_price` FLOAT NOT NULL,
  `description` VARCHAR(245) NULL,
  `brand_id` INT NOT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `code_UNIQUE` ON `allinone`.`product` (`code` ASC);

CREATE INDEX `fk_product_product_type1_idx` ON `allinone`.`product` (`category_id` ASC);

CREATE INDEX `fk_product_season1_idx` ON `allinone`.`product` (`season_id` ASC);

CREATE INDEX `fk_product_sex1_idx` ON `allinone`.`product` (`sex_id` ASC);

CREATE INDEX `fk_product_brand1_idx` ON `allinone`.`product` (`brand_id` ASC);


-- -----------------------------------------------------
-- Table `allinone`.`product_import`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`product_import` ;

CREATE TABLE IF NOT EXISTS `allinone`.`product_import` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `product_code` VARCHAR(16) NOT NULL,
  `import_facture_code` VARCHAR(45) NOT NULL,
  `quantity` INT NOT NULL,
  `import_price` FLOAT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

CREATE INDEX `fk_product_import_product1_idx` ON `allinone`.`product_import` (`product_code` ASC);

CREATE INDEX `fk_product_import_import_facture1_idx` ON `allinone`.`product_import` (`import_facture_code` ASC);


-- -----------------------------------------------------
-- Table `allinone`.`config`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`config` ;

CREATE TABLE IF NOT EXISTS `allinone`.`config` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `value` VARCHAR(45) NOT NULL,
  `description` VARCHAR(245) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `allinone`.`fund`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `allinone`.`fund` ;

CREATE TABLE IF NOT EXISTS `allinone`.`fund` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`, `name`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `allinone`.`shop`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`shop` (`id`, `name`, `address`, `date`) VALUES (1, 'shop1', '19 Vạn Phúc - Hà Đông - Hà Nội', '2014-01-01 10:00:00');
INSERT INTO `allinone`.`shop` (`id`, `name`, `address`, `date`) VALUES (2, 'shop2', 'Số 3 Ngã Tư Lê Văn Lương - Vạn Phúc - Hà Đông - Hà Nội', '2014-01-01 10:00:00');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`user` (`id`, `shop_id`, `name`, `email`, `phone_number`, `username`, `password`, `confirmcode`, `status`, `start_date`, `end_date`, `description`) VALUES (1, 1, 'Trần Trí Duệ', 'trantridue@gmail.com', '0979355285', 'admin', 'ea89fe25edf05960003a3b1ab4f4366e', 'y', 'y', '2014-01-01 10:00:00', '2020-12-31 22:00:00', 'Ông chủ');
INSERT INTO `allinone`.`user` (`id`, `shop_id`, `name`, `email`, `phone_number`, `username`, `password`, `confirmcode`, `status`, `start_date`, `end_date`, `description`) VALUES (2, 2, 'Lê Thị Châu', 'zabuza.vn@gmail.com', '0966807709', 'chau', 'ea89fe25edf05960003a3b1ab4f4366e', 'y', 'y', '2014-01-01 10:00:00', '2020-12-31 22:00:00', 'Bà Chủ');
INSERT INTO `allinone`.`user` (`id`, `shop_id`, `name`, `email`, `phone_number`, `username`, `password`, `confirmcode`, `status`, `start_date`, `end_date`, `description`) VALUES (3, 1, 'Lê Thị Bảo', 'baobao170491@gmail.com', '01649785255', 'bao', 'ea89fe25edf05960003a3b1ab4f4366e', 'y', 'y', '2014-01-01 10:00:00', '2020-12-31 22:00:00', 'Nhân Viên');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`role`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`role` (`id`, `name`, `description`) VALUES (1, 'admin', 'Quản Trị');
INSERT INTO `allinone`.`role` (`id`, `name`, `description`) VALUES (2, 'editor', 'Nhập Liệu');
INSERT INTO `allinone`.`role` (`id`, `name`, `description`) VALUES (3, 'employee', 'Nhân Viên');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`user_role`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`user_role` (`id`, `role_id`, `user_id`, `description`) VALUES (1, 1, 1, NULL);
INSERT INTO `allinone`.`user_role` (`id`, `role_id`, `user_id`, `description`) VALUES (2, 2, 1, NULL);
INSERT INTO `allinone`.`user_role` (`id`, `role_id`, `user_id`, `description`) VALUES (3, 3, 1, NULL);
INSERT INTO `allinone`.`user_role` (`id`, `role_id`, `user_id`, `description`) VALUES (4, 2, 2, NULL);
INSERT INTO `allinone`.`user_role` (`id`, `role_id`, `user_id`, `description`) VALUES (5, 3, 2, NULL);
INSERT INTO `allinone`.`user_role` (`id`, `role_id`, `user_id`, `description`) VALUES (6, 3, 3, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`provider`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`provider` (`id`, `name`, `tel`, `address`, `description`) VALUES (1, 'Kiểm Hàng', '0979355285', '19 Vạn Phúc Hà Đông Hà Nội', 'Chủ cửa hàng');
INSERT INTO `allinone`.`provider` (`id`, `name`, `tel`, `address`, `description`) VALUES (2, 'Hiền', '0988774433', 'Đặng Văn Ngữ', 'Nhà cung cấp lớn');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`category`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`category` (`id`, `name`, `description`) VALUES (1, 'VAY', 'Các loại váy');
INSERT INTO `allinone`.`category` (`id`, `name`, `description`) VALUES (2, 'AO PHONG', 'Áo phông các loại');
INSERT INTO `allinone`.`category` (`id`, `name`, `description`) VALUES (3, 'QUAN JEANS', 'Các loại quần jeans');
INSERT INTO `allinone`.`category` (`id`, `name`, `description`) VALUES (4, 'CHAN VAY', 'Chân váy các loại');
INSERT INTO `allinone`.`category` (`id`, `name`, `description`) VALUES (NULL, 'AO DA', 'Áo da');
INSERT INTO `allinone`.`category` (`id`, `name`, `description`) VALUES (NULL, 'AO DẠ', 'Áo dạ');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`season`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`season` (`id`, `start_time`, `end_time`, `name`) VALUES (1, '2014-01-01', '2014-03-31', 'SPRING');
INSERT INTO `allinone`.`season` (`id`, `start_time`, `end_time`, `name`) VALUES (2, '2014-04-01', '2014-06-30', 'SUMMER');
INSERT INTO `allinone`.`season` (`id`, `start_time`, `end_time`, `name`) VALUES (3, '2014-07-01', '2014-09-30', 'AUTUMN');
INSERT INTO `allinone`.`season` (`id`, `start_time`, `end_time`, `name`) VALUES (4, '2014-10-01', '2014-12-31', 'WINTER');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`sex`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`sex` (`id`, `name`) VALUES (1, 'woman');
INSERT INTO `allinone`.`sex` (`id`, `name`) VALUES (2, 'man');

COMMIT;


-- -----------------------------------------------------
-- Data for table `allinone`.`brand`
-- -----------------------------------------------------
START TRANSACTION;
USE `allinone`;
INSERT INTO `allinone`.`brand` (`id`, `name`) VALUES (1, 'MADEVN');
INSERT INTO `allinone`.`brand` (`id`, `name`) VALUES (2, 'F21');
INSERT INTO `allinone`.`brand` (`id`, `name`) VALUES (3, 'MGN');

COMMIT;
